---
title: Python语法妙处(2)
tags: 
- Python
- 学习
---

列表是python的一大特色，让我们看看列表的有趣之处吧。

<!--more-->

```python
a = [1,2]

b = [1,2]

a + b
Out[3]: [1, 2, 1, 2]
```

列表加法返回的对象是两个列表合在一起

Python中有一个非常有趣~~（坑人）~~的点，就是标识符的作用类似于C++的指针，多个标识符可以指向同一个对象。这点在`int float str frozeset bool tuple`中没有明显体现，因为那些是不可变类型，操作返回的都是新对象。

然而在`list`中我们可以看到一个很明显的坑：

```python
raw = [1,2] #这时是[1,2]

new = raw #指向相同对象

new += [3,4] #+=此时效果和new.extend([3,4])相同

id(raw),id(new)
Out[12]: (2568562279688, 2568562279688) #raw和new此时有着相同id,是同一个对象

new = new + [5,6] #右侧先返回新的对象，然后new指向新对象

raw,new
Out[10]: ([1, 2, 3, 4], [1, 2, 3, 4, 5, 6])
```

`+=`在此时并不是一个简写，而是一个不同的操作，非常*贴心*的直接操作了原有对象。

因此列表最好不要有`a = b`，建议使用`a = b.copy()`，如果有必要还需要`deepcopy`

用`for`循环操作列表等可迭代对象时，可以在迭代过程中逐个更改可变对象的值（但不可以通过赋值来达成）

```python
data = [[1],[2],[3]]

for val in data :
    val = '!' #循环语句中的标识符val可以被赋值
    print(val)
    
!
!
!

data
Out[25]: [[1], [2], [3]] #但是赋值更改val不会更改data本身

data = [[1],[2],[3]]

for val in data :
    val.append('~') #循环语句中的标识符val可以通过自己的方法更改
    print(val)
    
[1, '~']
[2, '~']
[3, '~']

data
Out[22]: [[1, '~'], [2, '~'], [3, '~']]
```